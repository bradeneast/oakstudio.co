(()=>{var T=class{constructor({onload:r=null,selector:f,cacheLimit:u,transitioningAttribute:o,preserveScroll:p=!1,preserveAttributes:s=!1}={}){f=f||`a[href^='${window.location.origin}']:not([data-no-schwifty]), a[href^='/']:not([data-no-schwifty])`,u=u||85,o=o||"data-schwifty";let v=s===!0;typeof s!="object"&&(s={documentElement:v,head:v,body:v});let y="schwifty-preload",m='link[rel="stylesheet"]',i=document,$=i.documentElement,g="innerHTML",c=new Map,O=new IntersectionObserver((e,t)=>e.forEach(S=>{let E=S.isIntersecting,b=S.target.href;!E&&E!=null||(c.size>=u&&c.delete(c.keys()[0]),c.get(b)?t.unobserve(S.target):X(b))}),{threshold:.5}),M=(e,t=i)=>t.querySelector(e),w=(e,t=i)=>t.querySelectorAll(e),R=e=>e.target.closest(f)||{},q=()=>w(f).forEach(e=>O.observe(e)),h=(e,t=window)=>t.dispatchEvent(new Event(e)),x=e=>e.replace(/m?s/gi,""),A=()=>{let e=getComputedStyle($);return(x(e.transitionDelay)+x(e.transitionDuration))*1e3},X=e=>{if(!e)return;let t=new XMLHttpRequest;t.onreadystatechange=function(){this.status==200&&c.set(e,t.responseXML)},t.open("GET",e,!0),t.responseType="document",t.send()},k=e=>{let t=c.get(e);if(!t){location=e;return}history.replaceState(null,null,e),w(`${m}:not(.${y})`).forEach(l=>{let n=l.href.replace(location.origin,""),a=M(`${m}.${y}[href="${n}"]`),C=M(`${m}[href="${n}"]`,t);C&&!a&&(l.classList.add(y),$.append(l)),!C&&a&&a.remove()});let S=`${m}:not(.${y})`,E=`${m}.${y}`,b=w(S,t),j=w(E);for(let l of j)Array.from(b).some(n=>n.href==l.href)||l.remove();["body","head","documentElement"].forEach(l=>{if(s[l])return;let n=i[l];for(let a of n.attributes)n.removeAttribute(a.name);for(let a of t[l].attributes)n.setAttribute(a.name,a.value)}),$.setAttribute(o,"out"),h("pagehide"),h("unload"),setTimeout(()=>{i.body[g]=t.body[g],i.head[g]=t.head[g],$.setAttribute(o,"in"),h("DOMContentLoaded",i),p||scrollTo(0,0),r&&(r.length?r.map(l=>l()):r()),q(),setTimeout(()=>$.removeAttribute(o),A()),h("load"),h("pageshow")},A())};q(),addEventListener("popstate",()=>k(location.href)),addEventListener("click",e=>{let t=R(e).href;t&&(e.preventDefault(),h("beforeunload"),history.pushState(null,null,location.href),k(t))})}},D=T;var L=(d,r=document)=>r.querySelectorAll(d),H=(d,r)=>d.getAttribute(r);function I(){L("form").forEach(d=>{function r(f){let u=f.target,o=u.id;!u.hasAttribute("data-has-conditional")||L("[data-condition]",d).forEach(p=>{let s=H(p,"data-condition");p.classList.toggle("hidden",s!=o),p.setAttribute("required",s==o)})}d.addEventListener("input",r)})}I();new D({preserveScroll:!1,onload:I});})();
