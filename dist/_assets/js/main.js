(()=>{var b=class{constructor({onload:h=null,selector:p,cacheLimit:v,transitioningAttribute:d,preserveScroll:D=!1,preserveAttributes:y=!1}={}){p=p||`a[href^='${window.location.origin}']:not([data-no-schwifty]), a[href^='/']:not([data-no-schwifty])`,v=v||85,d=d||"data-schwifty";let E=y===!0;typeof y!="object"&&(y={documentElement:E,head:E,body:E});let i="schwifty-preload",f='link[rel="stylesheet"]',n=document,c=n.documentElement,m="innerHTML",a=new Map,H=new IntersectionObserver((e,t)=>e.forEach(u=>{let S=u.isIntersecting,w=u.target.href;!S&&S!=null||(a.size>=v&&a.delete(a.keys()[0]),a.get(w)?t.unobserve(u.target):I(w))}),{threshold:.5}),g=(e,t=n)=>t.querySelector(e),$=(e,t=n)=>t.querySelectorAll(e),A=e=>e.target.closest(p)||{},T=()=>$(p).forEach(e=>H.observe(e)),s=(e,t=window)=>t.dispatchEvent(new Event(e)),L=e=>e.replace(/m?s/gi,""),M=()=>{let e=getComputedStyle(c);return(L(e.transitionDelay)+L(e.transitionDuration))*1e3},I=e=>{if(!e)return;let t=new XMLHttpRequest;t.onreadystatechange=function(){this.status==200&&a.set(e,t.responseXML)},t.open("GET",e,!0),t.responseType="document",t.send()},q=e=>{let t=a.get(e);if(!t){location=e;return}history.replaceState(null,null,e),$(`${f}:not(.${i})`).forEach(l=>{let o=l.href.replace(location.origin,""),r=g(`${f}.${i}[href="${o}"]`),x=g(`${f}[href="${o}"]`,t);x&&!r&&(l.classList.add(i),c.append(l)),!x&&r&&r.remove()});let u=`${f}:not(.${i})`,S=`${f}.${i}`,w=$(u,t),O=$(S);for(let l of O)Array.from(w).some(o=>o.href==l.href)||l.remove();["body","head","documentElement"].forEach(l=>{if(y[l])return;let o=n[l];for(let r of o.attributes)o.removeAttribute(r.name);for(let r of t[l].attributes)o.setAttribute(r.name,r.value)}),c.setAttribute(d,"out"),s("pagehide"),s("unload"),setTimeout(()=>{n.body[m]=t.body[m],n.head[m]=t.head[m],c.setAttribute(d,"in"),s("DOMContentLoaded",n),D||scrollTo(0,0),h&&(h.length?h.map(l=>l()):h()),T(),setTimeout(()=>c.removeAttribute(d),M()),s("load"),s("pageshow")},M())};T(),addEventListener("popstate",()=>q(location.href)),addEventListener("click",e=>{let t=A(e).href;t&&(e.preventDefault(),s("beforeunload"),history.pushState(null,null,location.href),q(t))})}},k=b;function C(){}C();new k({preserveScroll:!1,onload:C});})();
